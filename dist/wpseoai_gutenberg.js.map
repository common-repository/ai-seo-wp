{"version":3,"file":"wpseoai_gutenberg.js","mappings":"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","sources":["webpack://wpseoai-plugin/./node_modules/.pnpm/react@18.2.0/node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://wpseoai-plugin/./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js","webpack://wpseoai-plugin/./src/wpseoai_gutenberg.tsx","webpack://wpseoai-plugin/external window \"React\"","webpack://wpseoai-plugin/external window [\"wp\",\"apiFetch\"]","webpack://wpseoai-plugin/external window [\"wp\",\"blocks\"]","webpack://wpseoai-plugin/external window [\"wp\",\"components\"]","webpack://wpseoai-plugin/external window [\"wp\",\"data\"]","webpack://wpseoai-plugin/external window [\"wp\",\"editPost\"]","webpack://wpseoai-plugin/external window [\"wp\",\"i18n\"]","webpack://wpseoai-plugin/external window [\"wp\",\"plugins\"]","webpack://wpseoai-plugin/webpack/bootstrap","webpack://wpseoai-plugin/webpack/startup"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\n/*\n * WPSEO.AI\n *\n * @package       WPSEOAI\n * @author        WPSEO.AI Ltd\n * License:       MIT\n */\nconst plugins_1 = require(\"@wordpress/plugins\");\nconst edit_post_1 = require(\"@wordpress/edit-post\");\n// import { PanelBody, TextControl, Button } from '@wordpress/components';\nconst components_1 = require(\"@wordpress/components\");\nconst react_1 = require(\"react\");\n// import { registerBlockType } from '@wordpress/blocks';\nconst data_1 = require(\"@wordpress/data\");\n// import { useEntityProp } from '@wordpress/core-data';\n// import {InspectorControls, useBlockProps} from '@wordpress/block-editor';\nconst i18n_1 = require(\"@wordpress/i18n\");\nconst blocks_1 = require(\"@wordpress/blocks\");\n// import {ToolsPanel} from \"@wordpress/components/build-types/tools-panel\";\nconst api_fetch_1 = __importDefault(require(\"@wordpress/api-fetch\"));\nconst WPSEOAISidebar = ({ isOpen, setIsOpen }) => {\n    var _a;\n    let interval;\n    const [data, setData] = (0, react_1.useState)({\n        stale: false,\n        locales: null,\n        defaultLocale: null,\n        summary: null,\n        submissionState: 0,\n        auditId: 0,\n        postId: 0,\n        revisionId: 0,\n        showRetrieve: false,\n    });\n    const updateData = (newData) => setData(prev => (Object.assign(Object.assign({}, prev), newData)));\n    const getSubmissionState = () => {\n        var _a;\n        return (_a = data.submissionState) !== null && _a !== void 0 ? _a : 0;\n    };\n    const handleError = (error) => {\n        // createErrorNotice(error?.message, {\n        //     // type: 'snackbar',\n        // });\n        if (error.name === 'AbortError')\n            console.log('Request has been aborted');\n        console.error(error === null || error === void 0 ? void 0 : error.message);\n        alert(error === null || error === void 0 ? void 0 : error.message);\n    };\n    const resetSubmissionState = (newData) => {\n        // Stop interval\n        clearInterval(interval);\n        // Submission state to: none\n        updateData(Object.assign(Object.assign({}, newData), { submissionState: 0 }));\n    };\n    const retrieveData = () => {\n        console.log(`Attempting submission retrieval`);\n        const controller = typeof AbortController === 'undefined' ? undefined : new AbortController();\n        // Gather context of this post\n        (0, api_fetch_1.default)({\n            path: `/wpseoai/v1/retrieve?post=${data.postId}`,\n            signal: controller === null || controller === void 0 ? void 0 : controller.signal,\n        })\n            .then((data) => {\n            const res = data;\n            console.log(res);\n            // if (res.hasOwnProperty('auditId'))\n            updateData({\n                stale: res.code === 200,\n                submissionState: res.code === 200 ? 0 : 2,\n                showRetrieve: res.code !== 200,\n            });\n        })\n            .catch((error) => {\n            handleError(error);\n            updateData({ submissionState: 0 });\n        });\n    };\n    const handleClick = (e) => {\n        e.preventDefault();\n        const locale = e.currentTarget.getAttribute('data-locale');\n        if (!locale)\n            return;\n        // Submission state to: sent\n        updateData({ submissionState: 1 });\n        const controller = typeof AbortController === 'undefined' ? undefined : new AbortController();\n        // Initiate post data submission\n        (0, api_fetch_1.default)({\n            path: `/wpseoai/v1/optimize?locale=${locale}&post=${data.postId}`,\n            signal: controller === null || controller === void 0 ? void 0 : controller.signal,\n        })\n            .then((data) => {\n            let nextData = {};\n            const res = data;\n            // Post ID for the audit record\n            if (res === null || res === void 0 ? void 0 : res.auditId)\n                nextData.auditId = res.auditId;\n            // Submission state to: processing\n            nextData.submissionState = 2;\n            updateData(nextData);\n            console.log(`Submission sent`);\n        })\n            .catch((error) => {\n            handleError(error);\n            // Submission state to: none\n            updateData({ submissionState: 0 });\n        });\n    };\n    (0, react_1.useEffect)(() => {\n        // Monitor state change of a submission\n        if (!data.showRetrieve && data.submissionState === 2) {\n            const highTime = 15000;\n            const lowTime = 2500;\n            let lastTime = Date.now();\n            let i = 0;\n            let j = 0;\n            const intervalCallback = () => {\n                let intervalTime = highTime - (j * lowTime);\n                if (intervalTime < lowTime)\n                    intervalTime = lowTime;\n                let nextTime = lastTime + intervalTime;\n                const currentTime = Date.now();\n                if (currentTime >= nextTime) {\n                    // console.log(`currentTime: ${currentTime}`);\n                    // console.log(`intervalTime: ${intervalTime}`);\n                    // console.log(`lastTime: ${lastTime}`);\n                    // console.log(`nextTime: ${nextTime}`);\n                    // console.log(`i: ${i}`);\n                    // console.log(`j: ${j}`);\n                    // Invalid audit ID\n                    if (!data.auditId) {\n                        console.log(`Invalid audit ID, unable to track progress of submission`);\n                        return resetSubmissionState();\n                    }\n                    const controller = typeof AbortController === 'undefined' ? undefined : new AbortController();\n                    // Request state of audit record\n                    (0, api_fetch_1.default)({\n                        path: `/wpseoai/v1/audit?post=${data.auditId}&limit=1`,\n                        signal: controller === null || controller === void 0 ? void 0 : controller.signal,\n                    })\n                        .then((data) => {\n                        const res = data;\n                        // Audit post has received response\n                        if ((res === null || res === void 0 ? void 0 : res.state) === '1') {\n                            // Suggest a refresh\n                            // TODO: Refactor indicator for submission received\n                            resetSubmissionState({ stale: true });\n                            console.log(`Response received`);\n                        }\n                    })\n                        .catch((error) => {\n                        handleError(error);\n                        resetSubmissionState();\n                    });\n                    lastTime = currentTime;\n                    j++;\n                }\n                i++;\n                // Prevent endless polling\n                if (i > 12) {\n                    resetSubmissionState();\n                    console.log(`Post-back not received; interval cleared`);\n                    retrieveData();\n                }\n            };\n            interval = setInterval(intervalCallback, lowTime);\n        }\n    }, [data.submissionState]);\n    (0, react_1.useEffect)(() => {\n        // Get current post ID\n        const postId = (0, data_1.select)('core/editor').getCurrentPostId();\n        updateData({ postId });\n        const revisionId = (0, data_1.select)('core/editor').getCurrentPostLastRevisionId();\n        updateData({ revisionId });\n        const controller = typeof AbortController === 'undefined' ? undefined : new AbortController();\n        // Gather context of this post\n        (0, api_fetch_1.default)({\n            path: `/wpseoai/v1/context?post=${postId}`,\n            signal: controller === null || controller === void 0 ? void 0 : controller.signal,\n        })\n            .then((data) => {\n            let nextData = {};\n            const res = data;\n            if (res.hasOwnProperty('defaultLocale'))\n                nextData.defaultLocale = res.defaultLocale;\n            if (res.hasOwnProperty('locales'))\n                nextData.locales = res.locales;\n            if (res.hasOwnProperty('summary'))\n                nextData.summary = res.summary;\n            updateData(nextData);\n        })\n            .catch((error) => {\n            handleError(error);\n        });\n    }, []);\n    const statusColor = data.stale\n        ? 'green'\n        : (data.submissionState === 2\n            ? 'blue'\n            : (data.submissionState === 1\n                ? 'blue'\n                : 'grey'));\n    return ((0, jsx_runtime_1.jsxs)(edit_post_1.PluginSidebar, { name: \"wpseoai-sidebar\", title: \"WPSEO.AI (Beta)\", icon: \"share-alt\", children: [(0, jsx_runtime_1.jsxs)(components_1.PanelBody, { title: (0, i18n_1.__)(`Help`, `ai-seo-wp`), initialOpen: false, children: [(0, jsx_runtime_1.jsx)(\"p\", { children: (0, i18n_1.__)(`The WPSEO.AI service is currently in beta phase. More features are in development.`, `ai-seo-wp`) }), (0, jsx_runtime_1.jsx)(\"p\", { children: (0, i18n_1.__)(`Please note, using the buttons and features on this sidebar, will deduct small chunks of credits, based on the content provided, from your subscription balance.`, `ai-seo-wp`) }), (0, jsx_runtime_1.jsxs)(\"ul\", { children: [(0, jsx_runtime_1.jsx)(\"li\", { children: (0, jsx_runtime_1.jsx)(\"a\", { href: `/wp-admin/revision.php?revision=${data.revisionId}&gutenberg=true`, children: \"View revisions\" }) }), (0, jsx_runtime_1.jsx)(\"li\", { children: (0, jsx_runtime_1.jsx)(\"a\", { href: `/wp-admin/admin.php?page=wpseoai_dashboard`, children: \"View audit logs\" }) }), (0, jsx_runtime_1.jsx)(\"li\", { children: (0, jsx_runtime_1.jsx)(\"a\", { href: `https://wpseo.ai/faq.html`, target: `_blank`, children: \"Frequently asked questions\" }) })] })] }), (0, jsx_runtime_1.jsx)(components_1.PanelBody, { title: \"Summary of changes\", className: !data.summary ? 'hidden' : '', children: (0, jsx_runtime_1.jsx)(\"p\", { children: (_a = data.summary) !== null && _a !== void 0 ? _a : (0, jsx_runtime_1.jsx)(\"i\", { children: \"N/A\" }) }) }), (0, jsx_runtime_1.jsx)(components_1.PanelBody, { title: \"Status\", children: (0, jsx_runtime_1.jsxs)(\"p\", { className: `wpseoai-status ${statusColor}`, children: [(0, jsx_runtime_1.jsx)(\"div\", { \"aria-hidden\": `true` }), (0, jsx_runtime_1.jsx)(\"span\", { children: data.stale ? ((0, jsx_runtime_1.jsx)(\"a\", { href: ``, children: (0, i18n_1.__)(`Reload page`, `ai-seo-wp`) })) : (data.submissionState === 2 ? ((0, jsx_runtime_1.jsx)(\"i\", { children: (0, i18n_1.__)(`Processing`, `ai-seo-wp`) })) : (data.submissionState === 1 ? ((0, jsx_runtime_1.jsx)(\"i\", { children: (0, i18n_1.__)(`Sending`, `ai-seo-wp`) })) : ((0, jsx_runtime_1.jsx)(\"i\", { children: (0, i18n_1.__)(`Inactive`, `ai-seo-wp`) })))) })] }) }), (0, jsx_runtime_1.jsxs)(components_1.PanelBody, { title: (0, i18n_1.__)(`Tools`, `ai-seo-wp`), children: [(0, jsx_runtime_1.jsx)(\"p\", { children: (0, jsx_runtime_1.jsx)(components_1.Button, { \"data-locale\": data.defaultLocale, variant: \"primary\", onClick: handleClick, isBusy: getSubmissionState() > 0, \"aria-disabled\": getSubmissionState() > 0, disabled: getSubmissionState() > 0, children: (0, i18n_1.__)(`Finesse (All)`, `ai-seo-wp`) }) }), (0, jsx_runtime_1.jsx)(\"p\", { children: (0, jsx_runtime_1.jsx)(components_1.Button, { variant: \"secondary\", className: !data.showRetrieve ? `hidden` : '', onClick: () => retrieveData(), \"aria-disabled\": getSubmissionState() === 0, disabled: getSubmissionState() === 0, children: (0, i18n_1.__)('Retrieve', `ai-seo-wp`) }) })] }), !data.locales ? null :\n                (0, jsx_runtime_1.jsxs)(components_1.PanelBody, { title: (0, i18n_1.__)(`Translate (WPML)`, `ai-seo-wp`), children: [(0, jsx_runtime_1.jsx)(\"p\", { children: \"Choose the language to translate this content into. Activate more languages, for more options below.\" }), (0, jsx_runtime_1.jsx)(\"p\", { children: data.locales && Object.entries(data.locales).map(([code, locale]) => {\n                                if (locale.code === data.defaultLocale)\n                                    return;\n                                // console.log(locale);\n                                return (0, jsx_runtime_1.jsx)(components_1.Button, { className: `wpseoai-translate`, \"data-locale\": code, variant: \"secondary\", onClick: handleClick, isBusy: getSubmissionState() > 0, \"aria-disabled\": getSubmissionState() > 0, children: locale.display_name });\n                            }) })] })] }));\n};\n// Wrap the component using the withState higher-order component to manage the sidebar state\nconst WPSEOAISidebarWithState = () => {\n    const [isOpen, setIsOpen] = (0, react_1.useState)(false);\n    return ((0, jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment, { children: [(0, jsx_runtime_1.jsx)(WPSEOAISidebar, { isOpen: isOpen, setIsOpen: setIsOpen }), (0, jsx_runtime_1.jsx)(edit_post_1.PluginSidebarMoreMenuItem, { target: \"wpseoai-sidebar\", children: \"WPSEO.AI (Beta)\" })] }));\n};\n// Register the plugin and add the sidebar to the Gutenberg editor\n(0, plugins_1.registerPlugin)('custom-sidebar', {\n    render: WPSEOAISidebarWithState,\n});\n// Register the collection.\n(0, blocks_1.registerBlockCollection)('wpseoai', {\n    title: (0, i18n_1.__)('WPSEO.AI (Beta)', `ai-seo-wp`),\n});\n","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editPost\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"plugins\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(357);\n"],"names":["f","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","exports","Fragment","jsx","jsxs","module","__importDefault","this","mod","__esModule","defineProperty","value","jsx_runtime_1","plugins_1","edit_post_1","components_1","react_1","data_1","i18n_1","blocks_1","api_fetch_1","WPSEOAISidebar","isOpen","setIsOpen","_a","interval","data","setData","useState","stale","locales","defaultLocale","summary","submissionState","auditId","postId","revisionId","showRetrieve","updateData","newData","prev","assign","getSubmissionState","handleError","error","name","console","log","message","alert","resetSubmissionState","clearInterval","retrieveData","controller","AbortController","undefined","default","path","signal","then","res","code","catch","handleClick","preventDefault","locale","currentTarget","getAttribute","nextData","useEffect","highTime","lowTime","lastTime","Date","now","i","j","setInterval","intervalTime","nextTime","currentTime","state","select","getCurrentPostId","getCurrentPostLastRevisionId","statusColor","PluginSidebar","title","icon","children","PanelBody","__","initialOpen","href","target","className","Button","variant","onClick","isBusy","disabled","entries","map","display_name","registerPlugin","render","PluginSidebarMoreMenuItem","registerBlockCollection","window","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}